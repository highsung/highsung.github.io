<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>HighSung</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="start here~~">
<meta property="og:type" content="website">
<meta property="og:title" content="HighSung">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="HighSung">
<meta property="og:description" content="start here~~">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HighSung">
<meta name="twitter:description" content="start here~~">
  
    <link rel="alternate" href="/atom.xml" title="HighSung" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">HighSung</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Make progress bit by bit every day</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-course/embeded/lesson_9" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/22/course/embeded/lesson_9/" class="article-date">
  <time datetime="2017-03-22T08:52:00.000Z" itemprop="datePublished">2017-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/22/course/embeded/lesson_9/">（9）gdb</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="gdb简介"><a href="#gdb简介" class="headerlink" title="gdb简介"></a>gdb简介</h4><h4 id="程序调试"><a href="#程序调试" class="headerlink" title="程序调试"></a>程序调试</h4><h4 id="gdb进阶"><a href="#gdb进阶" class="headerlink" title="gdb进阶"></a>gdb进阶</h4><hr>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_9/link.jpg" alt="image"></p>
<h5 id="gdb简介-1"><a href="#gdb简介-1" class="headerlink" title="gdb简介"></a>gdb简介</h5><p>GDB, the GNU Project debugger, allows you to see what is going on ‘inside’ another program while it executes – or what another program was doing at the moment it crashed.</p>
<p>The program being debugged can be written in Ada, C, C++, Objective-C, Pascal (and many other languages). Those programs might be executing on the same machine as GDB (native) or on another machine (remote). GDB can run on most popular UNIX and Microsoft Windows variants.</p>
<p>GDB，GNU项目调试器，可以让您看到在执行另一个程序时发生了什么 - 或者其他程序在崩溃时正在做什么。</p>
<p>被调试的程序可以用Ada，C，C ++，Objective-C，Pascal（和许多其他语言）编写。 这些程序可能与GDB（本地）或另一台机器（远程）在同一台机器上执行。 GDB可以运行在大多数流行的UNIX和Microsoft Windows中。</p>
<h4 id="程序调试-1"><a href="#程序调试-1" class="headerlink" title="程序调试"></a>程序调试</h4><ul>
<li><p>gdb常用指令</p>
<ol>
<li><p>检测gdb是否安装及版本号，若未安装gdb会提示“未找到命令”。fedora25默认已安装。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> $ gdb -v</div><div class="line">GNU gdb (GDB) Fedora 7.12-24.fc25</div><div class="line">Copyright (C) 2016 Free Software Foundation, Inc.</div></pre></td></tr></table></figure>
</li>
<li><p>编写test.c程序，内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">int sum(int n)</div><div class="line">&#123;</div><div class="line">    int sum=0;</div><div class="line">    for(int i=0; i&lt;=n; i++)</div><div class="line">    &#123;</div><div class="line">	sum += i;</div><div class="line">    &#125;</div><div class="line">    return sum;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(int argv, char *args[])</div><div class="line">&#123;</div><div class="line">    int i;</div><div class="line">    long result=0;</div><div class="line">    for(i=1; i&lt;=10; i++)</div><div class="line">    &#123;</div><div class="line">        result += i;</div><div class="line">    &#125;</div><div class="line">    printf(&quot;result[1-10]=%d\n&quot;,result);</div><div class="line">    printf(&quot;result[1-100]=%d\n&quot;,sum(100));</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>编译debug版本的testd</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gcc -o testd -g test.c</div></pre></td></tr></table></figure>
</li>
<li><p>gdb载入test，list或l查看源码，回车可继续浏览</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  $ gdb testd</div><div class="line">  (gdb) list</div><div class="line">2</div><div class="line">3	int sum(int n)</div><div class="line">4	&#123;</div><div class="line">5	    int sum=0;</div><div class="line">6	    for(int i=0; i&lt;=n; i++)</div><div class="line">7	    &#123;</div><div class="line">8		sum += i;</div><div class="line">9	    &#125;</div><div class="line">10	    return sum;</div><div class="line">11	&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><p>设置断点，break 行号，break 函数名，info break 查看断点信息，break也可简写成b</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  (gdb) break 19</div><div class="line">Breakpoint 1 at 0x400544: file test.c, line 19.</div><div class="line">(gdb) break sum</div><div class="line">Breakpoint 2 at 0x4004fd: file test.c, line 5.</div><div class="line">(gdb) info break</div><div class="line">Num     Type           Disp Enb Address            What</div><div class="line">1       breakpoint     keep y   0x0000000000400544 in main at test.c:19</div><div class="line">2       breakpoint     keep y   0x00000000004004fd in sum at test.c:5</div><div class="line">(gdb)</div></pre></td></tr></table></figure>
</li>
<li><p>清除断点，clear 行号，clear 函数名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  (gdb) info b</div><div class="line">Num     Type           Disp Enb Address            What</div><div class="line">1       breakpoint     keep y   0x0000000000400544 in main at test.c:19</div><div class="line">	breakpoint already hit 10 times</div><div class="line">2       breakpoint     keep y   0x00000000004004fd in sum at test.c:5</div><div class="line">	breakpoint already hit 1 time</div><div class="line">  第二个断点被清除</div><div class="line">(gdb) clear 5</div><div class="line">Deleted breakpoint 2</div><div class="line">(gdb) info b</div><div class="line">Num     Type           Disp Enb Address            What</div><div class="line">1       breakpoint     keep y   0x0000000000400544 in main at test.c:19</div><div class="line">	breakpoint already hit 10 times</div></pre></td></tr></table></figure>
</li>
<li><p>开始调试，输入run或r，停在第一个断点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">  (gdb) run</div><div class="line">Starting program: /home/highsung/dev/lesson_9/test</div><div class="line">Missing separate debuginfos, use: dnf debuginfo-install glibc-2.24-4.fc25.x86_64</div><div class="line"></div><div class="line">Breakpoint 1, main (argv=1, args=0x7fffffffe2b8) at test.c:19</div><div class="line">19	        result += i;</div><div class="line">(gdb)</div></pre></td></tr></table></figure>
</li>
<li><p>单步执行，输入next或n</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  (gdb) next</div><div class="line">17	    for(i=1; i&lt;=10; i++)</div><div class="line">(gdb) n</div><div class="line"></div><div class="line">Breakpoint 1, main (argv=1, args=0x7fffffffe2b8) at test.c:19</div><div class="line">19	        result += i;</div><div class="line">(gdb) n</div><div class="line">17	    for(i=1; i&lt;=10; i++)</div><div class="line">(gdb) n</div></pre></td></tr></table></figure>
</li>
<li><p>查看变量值，输入print或p</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  (gdb) print i</div><div class="line">$4 = 9</div><div class="line">(gdb) print result</div><div class="line">$5 = 45</div><div class="line">(gdb)</div><div class="line">$6 = 45</div><div class="line">(gdb) p i</div><div class="line">$7 = 9</div></pre></td></tr></table></figure>
</li>
<li><p>执行到下个断点，continue或c，没有断点程序结束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  (gdb) continue</div><div class="line">Continuing.</div><div class="line">result[1-100]=5050</div><div class="line">[Inferior 1 (process 3674) exited normally]</div></pre></td></tr></table></figure>
</li>
<li><p>查看程序调用栈信息，当前执行到sum函数中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  (gdb) bt</div><div class="line">#0  sum (n=100) at test.c:6</div><div class="line">#1  0x0000000000400577 in main (argv=1, args=0x7fffffffe2b8) at test.c:22</div></pre></td></tr></table></figure>
</li>
<li><p>退出当前函数，finish</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">  (gdb) finish</div><div class="line">Run till exit from #0  sum (n=100) at test.c:6</div><div class="line">0x0000000000400577 in main (argv=1, args=0x7fffffffe2b8) at test.c:22</div><div class="line">22	    printf(&quot;result[1-100]=%d\n&quot;,sum(100));</div><div class="line">Value returned is $10 = 5050</div><div class="line">(gdb) n</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h4 id="gdb进阶-1"><a href="#gdb进阶-1" class="headerlink" title="gdb进阶"></a>gdb进阶</h4><p>一般来说，调试程序时需要编译器带-g参数，如果没有-g，将看不到程序的函数名，变量名，所替代将是运行时的内存地址。<br>启动gdb的方法有以下几种：</p>
<ol>
<li>gdb &lt;program&gt;  带调试信息的program程序。</li>
<li>gdb &lt;program&gt; core core文件是program程序非法执行后生产的文件，可以用它还原程序崩溃现场。</li>
<li>gdb &lt;program&gt; &lt;PID&gt; 调试一个正常运行的进程，gdb会自动attach上去并调试它。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ sudo gdb /usr/local/nginx/sbin/nginx 3832</div><div class="line">(gdb) quit</div><div class="line">A debugging session is active.</div><div class="line"></div><div class="line">	Inferior 1 [process 3832] will be detached.</div><div class="line"></div><div class="line">Quit anyway? (y or n) y</div><div class="line">Detaching from program: /usr/local/nginx/sbin/nginx, process 3832</div></pre></td></tr></table></figure>
</li>
</ol>
<p>在gdb准备执行run或r指令前，可以对一些环境参数进行设置：</p>
<ol>
<li><p>程序运行参数。<br>set args 指定运行时参数。如：set arg 1 2 3 4<br>show args 可以查看设置好的参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  (gdb) set args 1 2 3 4</div><div class="line">(gdb) show args</div><div class="line">Argument list to give program being debugged when it is started is &quot;1 2 3 4&quot;.</div></pre></td></tr></table></figure>
</li>
<li><p>程序工作路径<br>path &lt;dir&gt; 添加程序的工作路径<br>show paths<br>当前目录被添加到了工作路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  (gdb) path .</div><div class="line">Executable and object file path: /home/highsung/dev/lesson_9:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/highsung/.local/bin:/home/highsung/bin</div><div class="line">(gdb) show paths</div><div class="line">Executable and object file path: /home/highsung/dev/lesson_9:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/highsung/.local/bin:/home/highsung/bin</div></pre></td></tr></table></figure>
</li>
<li><p>添加环境变量<br>set environment varname=[value] 设置环境变量<br>show environment [varname] 查看环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  (gdb) set env XM1=111</div><div class="line">(gdb) show env XM1</div><div class="line">XM1 = 111</div><div class="line">(gdb) show env</div><div class="line">XDG_VTNR=1</div><div class="line">SSH_AGENT_PID=1183</div><div class="line">...</div><div class="line">LINES=24</div><div class="line">COLUMNS=80</div><div class="line">XM1=111</div></pre></td></tr></table></figure>
</li>
<li><p>程序的输入输出<br>info terminal 显示程序用到的终端模式，可以重定向到某个文件，如run &gt; outfile<br>也可用tty 命令指定输入输出的终端设备。如 tty /dev/ttyb</p>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_9/20170323135654.png" alt="image"></p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/22/course/embeded/lesson_9/" data-id="cj0mizkzi0012j0uf7yqd727p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/course/embeded/lesson_8/" class="article-date">
  <time datetime="2017-03-21T08:51:00.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/course/embeded/lesson_8/">（8）gcc</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="gcc简介"><a href="#gcc简介" class="headerlink" title="gcc简介"></a>gcc简介</h4><h4 id="程序编译过程"><a href="#程序编译过程" class="headerlink" title="程序编译过程"></a>程序编译过程</h4><h4 id="gcc编译object-c"><a href="#gcc编译object-c" class="headerlink" title="gcc编译object-c"></a>gcc编译object-c</h4><hr>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_8/link.jpg" alt="image"></p>
<h5 id="gcc简介-1"><a href="#gcc简介-1" class="headerlink" title="gcc简介"></a>gcc简介</h5><h6 id="GCC-the-GNU-Compiler-Collection"><a href="#GCC-the-GNU-Compiler-Collection" class="headerlink" title="GCC, the GNU Compiler Collection"></a><a href="http://gcc.gnu.org/" target="_blank" rel="external">GCC</a>, the GNU Compiler Collection</h6><p>The GNU Compiler Collection includes front ends for C, C++, Objective-C, Fortran, Ada, and Go, as well as libraries for these languages (libstdc++,…). GCC was originally written as the compiler for the GNU operating system. The GNU system was developed to be 100% free software, free in the sense that it respects the user’s freedom.</p>
<p>GCC是GNU编译器集合。GNU编译器集合包括C，C ++，Objective-C，Fortran，Ada和Go的前端，以及这些语言的库（libstdc++，…）。 GCC最初是作为GNU操作系统的编译器编写的。 GNU系统被开发为100％免费的软件，它在尊重用户自由的意义上是免费的。</p>
<ul>
<li>gcc常用指令</li>
</ul>
<ol>
<li><p>检测gcc是否安装及版本号，若未安装gcc会提示“未找到命令”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">gcc -v</div><div class="line">使用内建 specs。</div><div class="line">COLLECT_GCC=gcc</div><div class="line">COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/6.2.1/lto-wrapper</div><div class="line">目标：x86_64-redhat-linux</div><div class="line">配置为：../configure ...</div><div class="line">线程模型：posix</div><div class="line">gcc 版本 6.2.1 20160916 (Red Hat 6.2.1-2) (GCC)</div></pre></td></tr></table></figure>
</li>
<li><p>编写hello.c程序，内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int main(int argv, char *arg[])</div><div class="line">&#123;</div><div class="line">  printf(&quot;%s&quot;,&quot;hello gcc!\n&quot;);</div><div class="line">  return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>编译hello.c，生成a.out文件，执行之输出“hello gcc!”。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ gcc hello.c</div><div class="line">$ ls</div><div class="line">a.out  hello.c</div><div class="line">$ ./a.out</div><div class="line">hello gcc!</div></pre></td></tr></table></figure>
</li>
<li><p>gcc常用编译选项</p>
</li>
</ol>
<ul>
<li><p>-o 指定编译生成的可执行程序名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ gcc hello.c -o hello.exe</div><div class="line">$ ls</div><div class="line">a.out  hello.c  hello.exe</div></pre></td></tr></table></figure>
</li>
<li><p>-g 告诉编译器生成调试信息，如下，包含调试信息的hello.exe比a.out大一些。<br>用gdb调试程序时，程序必须包含调试信息才能调试。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ gcc hello.c -o hello.exe -g</div><div class="line">$ ls -al</div><div class="line">总用量 36</div><div class="line">-rwxrwxr-x. 1 highsung highsung  8528 3月  21 17:12 a.out</div><div class="line">-rw-rw-r--. 1 highsung highsung    97 3月  21 17:12 hello.c</div><div class="line">-rwxrwxr-x. 1 highsung highsung 11048 3月  21 17:29 hello.exe</div></pre></td></tr></table></figure>
</li>
<li><p>也可通过strip命令去除hello.exe中的调试信息，如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ strip -g hello.exe</div><div class="line">$ ls -al</div><div class="line">总用量 36</div><div class="line">drwxrwxr-x. 2 highsung highsung 4096 3月  21 17:33 .</div><div class="line">drwxrwxr-x. 3 highsung highsung 4096 3月  21 17:08 ..</div><div class="line">-rwxrwxr-x. 1 highsung highsung 8528 3月  21 17:12 a.out</div><div class="line">-rw-rw-r--. 1 highsung highsung   97 3月  21 17:12 hello.c</div><div class="line">-rwxrwxr-x. 1 highsung highsung 8416 3月  21 17:33 hello.exe</div></pre></td></tr></table></figure>
</li>
<li><p>-static 以静态链接方式生成可执行程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ gcc -static hello.c -o a1</div><div class="line">/bin/ld: 找不到 -lc</div></pre></td></tr></table></figure>
<p>缺少静态包glibc-static，安装glibc-static后编译运行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ dnf install -y glibc-static</div><div class="line">$ gcc -static hello.c -o a1</div><div class="line">$ ls -al</div><div class="line">-rwxrwxr-x. 1 highsung highsung   8480 3月  21 19:24 a</div><div class="line">-rwxrwxr-x. 1 highsung highsung 917632 3月  21 19:21 a1</div></pre></td></tr></table></figure>
<p>发现a1的大小比a大得多。因为a程序所依赖的程序指令全部打包到了a1中。<br>那么如何查看a所依赖的动态库？用ldd命令查看，如下。<br>显示a依赖3个动态库，动态库名字so.m.n结尾，so代表是动态库，m.n代表主次版本号。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> $ ldd a</div><div class="line">linux-vdso.so.1 (0x00007ffc56d8e000)</div><div class="line">libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f09b1516000)</div><div class="line">/lib64/ld-linux-x86-64.so.2 (0x000055fcc140f000)</div><div class="line"> 这里提示a1不是一个动态执行文件</div><div class="line"> $ ldd a1</div><div class="line">not a dynamic executable</div><div class="line"> 用file命令查看，a1是静态链接方式。</div><div class="line"> $ file a1</div><div class="line"> a1: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), statically linked, for GNU/Linux 2.6.32, BuildID[sha1]=686f47857cae85c959c39301843029ee1e98467e, not stripped</div></pre></td></tr></table></figure>
</li>
<li><p>-Idir 指定编译时，搜索头文件路径。<br>用 #include &lt;file.h&gt;时，gcc会在-I指定的目录中查找file.h，查找不到时，到缺省目录/usr/include/中查找。<br>用 #include “file.h”时，gcc会在当前目录下查找file.h，查找不到时，再按上面的顺序查找。</p>
</li>
<li><p>-include file.h，功能相当于在代码中使用#include &lt;file.h&gt;</p>
</li>
<li><p>-Ldir 指定链接时，搜索库的路径。默认库的路径在/usr/lib，/usr/lib64<br>例子如下，在当前目录下my/lib搜索库文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -L./my/lib hello.c</div></pre></td></tr></table></figure>
</li>
<li><p>-llibrary 指定编译时候链接的库<br>例子如下，使用curses库链接程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -lcurses hello.c</div></pre></td></tr></table></figure>
</li>
<li><p>-O0 -O1 -O2 -O3，编译器优化的4个级别，-O0没有优化，-O1缺省优化，-O3最高级别优化。</p>
</li>
</ul>
<h5 id="程序编译过程-1"><a href="#程序编译过程-1" class="headerlink" title="程序编译过程"></a>程序编译过程</h5><p>gcc和g++执行编译工作的时候，总共需要4步：</p>
<ol>
<li>预处理，生成.i文件。-E选项激活</li>
<li>将预处理的文件转换成汇编语言，生成.s文件。-S选项激活</li>
<li>汇编指令转换成目标代码（机器代码），生成.o文件。-c选项激活</li>
<li>链接目标代码，生成可执行程序。-o选项激活<br>每一步的编译指令如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ gcc -E hello.c &gt;&gt; hello.i</div><div class="line">$ gcc -S hello.c</div><div class="line">$ gcc -c hello.c</div><div class="line">$ gcc -o hello hello.c</div><div class="line">$ ls -al</div><div class="line">-rwxrwxr-x. 1 highsung highsung   8480 3月  21 23:05 hello</div><div class="line">-rw-rw-r--. 1 highsung highsung     97 3月  21 19:07 hello.c</div><div class="line">-rw-rw-r--. 1 highsung highsung  16878 3月  21 23:02 hello.i</div><div class="line">-rw-rw-r--. 1 highsung highsung   1504 3月  21 23:02 hello.o</div><div class="line">-rw-rw-r--. 1 highsung highsung    501 3月  21 23:01 hello.s</div></pre></td></tr></table></figure>
</li>
</ol>
<p>预处理包含哪些处理？</p>
<ol>
<li>展开 #include 包含的头文件</li>
<li>处理条件编译指令，#if #ifndef #endif 等</li>
<li>替换 #define 定义的各种宏</li>
<li>处理编译指令，#pragma pack，#line 等</li>
</ol>
<h5 id="编译Objective-C"><a href="#编译Objective-C" class="headerlink" title="编译Objective-C"></a>编译Objective-C</h5><p>$ sudo dnf install gnustep*<br>$ sudo dnf install gcc-objc<br>hello.m文件如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    NSLog(@&quot;Hello world, Object-C!&quot;);</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>$ gcc -o hello hello.m -lobjc -lgnustep-base -fconstant-string-class=NSConstantString</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/21/course/embeded/lesson_8/" data-id="cj0mizkzg000zj0ufw02jn9zq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/20/course/embeded/lesson_7/" class="article-date">
  <time datetime="2017-03-20T05:37:00.000Z" itemprop="datePublished">2017-03-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/20/course/embeded/lesson_7/">（7）Linux Shell</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="Shell简介"><a href="#Shell简介" class="headerlink" title="Shell简介"></a>Shell简介</h4><h4 id="Shell配置和操作"><a href="#Shell配置和操作" class="headerlink" title="Shell配置和操作"></a>Shell配置和操作</h4><h4 id="Shell脚本"><a href="#Shell脚本" class="headerlink" title="Shell脚本"></a>Shell脚本</h4><hr>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_7/link.jpg" alt="image"></p>
<p>Shell 是操作系统的外壳，是用户使用操作系统的命令接口；接受用户以命令行方式输入的命令(包括系统提供的内部命令、独立存在于某个目录下的程序），同时也能解释执行由Shell命令编写的Shell程序。</p>
<p>Shell、用户和内核的关系见下图：<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_7/shell.png" alt="image"></p>
<p>从上图中可以看出，Shell是用户和Linux系统之间交互的桥梁。黑客，有个性的程序员或工程师习惯在Shell中输入各种命令和配置指令。界面的各种炫，对他们来说都是out之物。</p>
<h6 id="1-Shell大概工作流程："><a href="#1-Shell大概工作流程：" class="headerlink" title="1. Shell大概工作流程："></a>1. Shell大概工作流程：</h6><ul>
<li>接受来自键盘的命令</li>
<li>检查命令的正确性</li>
<li>命令错误则给出报错信息</li>
<li>命令正确则使用相应的系统调用执行命令(产生进程)</li>
<li>命令执行完毕，给出命令执行的结果</li>
</ul>
<hr>
<p>执行过程：分为前台执行和后台执行<br>前台：Shell 要等待命令（进程）结束，才恢复自身的运行，即回到终端提示符。<br>后台：Shell 不必等待命令（进程）结束，就恢复自身的运行，即回到终端提示符。在执行时命令后&amp;，例：$ gcc m.c&amp;</p>
<h6 id="2-Shell分类："><a href="#2-Shell分类：" class="headerlink" title="2. Shell分类："></a>2. Shell分类：</h6><p>目前主要有下列版本的Shell：</p>
<ul>
<li>Bourne Shell：贝尔实验室开发</li>
<li>Bash：GNU的Bourne Again Shell，是GNU操作系统上的默认Shell。</li>
<li>Korn Shell：是对Bourne Shell扩展，大部分通它一样。</li>
<li>C Shell：SUN公司Shell的BSD版本。<br>查看当前Linux账号Shell版本，采用的GNU bash。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/passwd</div><div class="line">highsung:x:1000:1000:highsung:/home/highsung:/bin/bash</div><div class="line">user2:x:1002:1001::/home/user2:/bin/bash</div><div class="line">user11:x:1001:1002::/home/user1:/bin/bash</div><div class="line">$ bash --version</div><div class="line">GNU bash，版本 4.3.43(1)-release (x86_64-redhat-linux-gnu)</div><div class="line">Copyright (C) 2013 Free Software Foundation, Inc.</div><div class="line">许可证 GPLv3+: GNU GPL 许可证第三版或者更新版本 &lt;http://gnu.org/licenses/gpl.html&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="3-Shell相关配置"><a href="#3-Shell相关配置" class="headerlink" title="3. Shell相关配置"></a>3. Shell相关配置</h6><ul>
<li><p>Linux中每个用户都可指定他的Shell。<br>示例：useradd -s选项指定，无指定则用系统默认Shell程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">useradd -s /bin/bash</div></pre></td></tr></table></figure>
<p>highsung、user2、user11都是系统默认Shell程序：/bin/bash。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/passwd</div><div class="line">highsung:x:1000:1000:highsung:/home/highsung:/bin/bash</div><div class="line">user2:x:1002:1001::/home/user2:/bin/bash</div><div class="line">user11:x:1001:1002::/home/user1:/bin/bash</div></pre></td></tr></table></figure>
</li>
<li><p>Shell的配置，Linux系统中每个用户都有各自的Shell工作环境，这样会导致命令提示，环境变量等的不一致。</p>
<ul>
<li>这些环境配置，集中在主目录下的.bash_profile，.bashrc，.bash_history文件。</li>
<li>.bashrc读取全局的/etc/bashrc的配置，.bahs_profile又读取.bashrc中的配置。</li>
<li>从上面的逻辑可以看出，可以把个性化的配置保存在.bahs_profile，全局配置保存在/etc/bashrc。</li>
<li>命令历史是Bash提供的一种功能，它保存了最近执行过的1000条命令，保存在.bash_history文件中。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$HISTFILESIZE 定义.bash_history存放历史记录的个数</div><div class="line">$ echo $HISTFILESIZE</div><div class="line">1000</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h6 id="5-Shell基本操作"><a href="#5-Shell基本操作" class="headerlink" title="5. Shell基本操作:"></a>5. Shell基本操作:</h6><ul>
<li><p>Shell的启动和退出<br>用户在成功登录进入系统后，系统提供产生一个特定的Shell的拷贝(这是用户的第一个进程)负责解释执行用户的命令或Shell脚本。在系统提示符后用户键入的命令或Shell脚本名，来执行特定的命令或Shell脚本，用户希望中止命令或脚本的执行，可以用【ctrl+c】。<br>用户结束工作希望退出系统，可以按下面的键或命令:<br>【ctrl+d】<br>exit  命令<br>logout 命令</p>
</li>
<li><p>查看历史命令<br>历史命令就是上次在Shell中输入的命令。前面已经提到，历史命令保存在主目录下.bash_history。</p>
<ul>
<li><p>通过history命令查看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ history</div><div class="line">  1  ls</div><div class="line">  2  rm /1</div><div class="line">  3  sudo rm /1</div><div class="line">  4  clear</div><div class="line">  5  ls</div><div class="line">  6  ls /</div><div class="line">  7  ls</div><div class="line">  8  ls / -al</div><div class="line">  9  clear</div><div class="line"> 10  ls / -al</div></pre></td></tr></table></figure>
</li>
<li><p>执行历史命令<br>!n:  执行编号为n的命令历史.<br>!-n: 执行命令历史中倒数第n个命令.<br>!!:  执行上一个历史命令.（在历史记录中不加入）<br>!字符串:  执行以“字符串”开头的历史命令.<br>!?字符串?: 执行包含“字符串”的历史命令.</p>
</li>
<li><p>命令历史的配置<br>给环境变量HISTFILE赋值，给出与.bash_history 不同的文件保存命令历史,例如： HISTFILE=newfile。<br>给环境变量HISTFILESIZE赋值，给出命令历史文件保存历史事件的个数,例如： HISTFILESIZE=1000。</p>
</li>
<li><p>别名，在Bash中可以使用alias命令为命令取一个别名，其中别名的内容可以是命令名、选项和参数。别名可以使用户键入命令时变得方便、简单。可以使用unalias命令来取消别名。</p>
<ul>
<li>定义别名格式：alias  [别名=“原命令”]<ul>
<li>原命令中包含命令名、选项和参数。</li>
<li>原命令中如有空格或特殊字符，应将其用单引号括起来。</li>
<li>等号=边不能有空格</li>
<li>不带任何参数的 alias  命令则显示已经定义的别名及其对应的命令。</li>
<li>本次登录建立的别名仅在本次登录有效，如果希望在每次登录都有效，应把alias 命令写入初始化脚本文件~/.bash_profile。</li>
</ul>
</li>
<li>例子：<br>$ alias  .. =’cd ..’<br>$ alias  cp =’cp -i’<br>$ alias  ll =’ls -l’</li>
<li>取消别名格式：unalias  别名<br>例：$unalias ll<br>$alias ll<br>ll:alias not found</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>Shell特殊字符<ul>
<li>通配符<br>?:  表示任意的单个字符<br>*:  表示任意长的任意的字符串<br>[ ]:  表示匹配放在 [ ] 中的字符集中的单个字符</li>
<li>例子：<br>*   表示当前目录下的所有文件<br>f<em>  表示当前目录下以f 开头的文件<br>\</em>.txt  表示当前目录下以.txt结尾的文件<br>*sh*   表示当前目录下所有名字包含sh 的文件<br>x[ml]   表示当前目录下以xm 或xl 开头的所有文件</li>
</ul>
</li>
</ul>
<h6 id="6-Shell脚本"><a href="#6-Shell脚本" class="headerlink" title="6. Shell脚本:"></a>6. Shell脚本:</h6><p>用户可以将Linux的命令（文件，用户，网络等命令）以编程的方式组合起来提交给Shell，Shell负责解释执行这种程序设计语言。Linux把由这种程序设计语言构成的文件称为Shell Script，或Shell脚本。</p>
<ul>
<li><p>新建sh1.sh文件，内容“#!/bin/bash echo “hello bash””，增加可运行权限，再执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ vi sh1.sh</div><div class="line">#!/bin/bash</div><div class="line">echo &quot;hello bash&quot;</div><div class="line">$ chmod +x sh1.sh</div><div class="line">$ ./sh1.sh</div><div class="line">hello bash</div></pre></td></tr></table></figure>
<ul>
<li>第一行的#!后指定Shell类型</li>
<li>文中#代表注释符</li>
<li>Shell脚本文件需+x权限才可执行</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/20/course/embeded/lesson_7/" data-id="cj0mizkzh0010j0ufukx0ewnh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/20/course/embeded/lesson_6/" class="article-date">
  <time datetime="2017-03-20T02:24:00.000Z" itemprop="datePublished">2017-03-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/20/course/embeded/lesson_6/">（6）Linux常用命令-进程和网络管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h4><h4 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h4><hr>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_5/install_soft.jpg" alt="image"></p>
<h5 id="进程管理主要涉及查看，查找当前运行进程ID，名称，CPU，内存等占用情况，杀死某些进程。"><a href="#进程管理主要涉及查看，查找当前运行进程ID，名称，CPU，内存等占用情况，杀死某些进程。" class="headerlink" title="进程管理主要涉及查看，查找当前运行进程ID，名称，CPU，内存等占用情况，杀死某些进程。"></a>进程管理主要涉及查看，查找当前运行进程ID，名称，CPU，内存等占用情况，杀死某些进程。</h5><h5 id="网络管理方面，查看系统网络适配器状态，启动，关闭网络适配器。ping某个IP是否被占用，修改主机IP地址和netmask。"><a href="#网络管理方面，查看系统网络适配器状态，启动，关闭网络适配器。ping某个IP是否被占用，修改主机IP地址和netmask。" class="headerlink" title="网络管理方面，查看系统网络适配器状态，启动，关闭网络适配器。ping某个IP是否被占用，修改主机IP地址和netmask。"></a>网络管理方面，查看系统网络适配器状态，启动，关闭网络适配器。ping某个IP是否被占用，修改主机IP地址和netmask。</h5><h4 id="1-进程管理"><a href="#1-进程管理" class="headerlink" title="1. 进程管理"></a>1. 进程管理</h4><ul>
<li>查看当前系统进程运行情况，类似于Windows任务管理器<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$ top</div><div class="line">top - 11:02:20 up  3:04,  0 users,  load average: 0.00, 0.02, 0.03</div><div class="line">Tasks: 147 total,   2 running, 145 sleeping,   0 stopped,   0 zombie</div><div class="line">%Cpu(s):  2.0 us,  0.7 sy,  0.0 ni, 96.6 id,  0.0 wa,  0.7 hi,  0.0 si,  0.0 st</div><div class="line">KiB Mem :   997172 total,   316164 free,   245008 used,   436000 buff/cache</div><div class="line">KiB Swap:  2256892 total,  2221596 free,    35296 used.   540444 avail Mem</div><div class="line"></div><div class="line">   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND     </div><div class="line">   890 root      20   0  365924  42104  10380 S  1.0  4.2   0:30.62 Xorg        </div><div class="line">  1653 highsung  20   0  640080  23676  17356 S  1.0  2.4   0:11.89 lxterminal  </div><div class="line">  1518 highsung  20   0  388036  16792  12372 S  0.3  1.7   0:14.86 vmtoolsd    </div><div class="line">  1632 highsung  20   0  474348  19304  14828 S  0.3  1.9   0:17.55 clipit      </div><div class="line"> 22461 highsung  20   0  156640   3952   3476 R  0.3  0.4   0:00.03 top         </div><div class="line">     1 root      20   0  149252   7864   6348 S  0.0  0.8   0:02.01 systemd     </div><div class="line">     2 root      20   0       0      0      0 S  0.0  0.0   0:00.03 kthreadd    </div><div class="line">     3 root      20   0       0      0      0 S  0.0  0.0   0:04.10 ksoftirqd/0</div><div class="line">     5 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kworker/0:+</div><div class="line">     7 root      20   0       0      0      0 S  0.0  0.0   0:00.82 rcu_sched   </div><div class="line">     8 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcu_bh      </div><div class="line">     9 root      20   0       0      0      0 R  0.0  0.0   0:01.06 rcuos/0     </div><div class="line">    10 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcuob/0</div></pre></td></tr></table></figure>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>top - 11:02:20</td>
<td>当前系统时间</td>
</tr>
<tr>
<td>up  3:04</td>
<td>系统开机时长，格式：小时:分钟</td>
</tr>
<tr>
<td>0 users</td>
<td>0个登录用户</td>
</tr>
<tr>
<td>load average: 0.00, 0.02, 0.03</td>
<td>系统负载，即任务队列的平均长度。三个数值分别为 1分钟、5分钟、15分钟前到现在的平均值。</td>
</tr>
<tr>
<td>Tasks: 147 total</td>
<td>进程总数</td>
</tr>
<tr>
<td>2 running</td>
<td>正在运行的进程数2个</td>
</tr>
<tr>
<td>145 sleeping</td>
<td>睡眠的进程数145个</td>
</tr>
<tr>
<td>0 stopped</td>
<td>停止的进程数0个</td>
</tr>
<tr>
<td>0 zombie</td>
<td>僵尸进程数0个</td>
</tr>
<tr>
<td>%Cpu(s):  2.0 us</td>
<td>用户空间占用CPU百分比</td>
</tr>
<tr>
<td>0.7 sy</td>
<td>内核空间占用CPU百分比</td>
</tr>
<tr>
<td>0.0 ni</td>
<td>用户进程空间内改变过优先级的进程占用CPU百分比</td>
</tr>
<tr>
<td>96.6 id</td>
<td>空闲CPU百分比</td>
</tr>
<tr>
<td>0.0 wa</td>
<td>等待输入输出的CPU时间百分比</td>
</tr>
<tr>
<td>KiB Mem :   997172 total</td>
<td>物理内存总量</td>
</tr>
<tr>
<td>316164 free</td>
<td>空闲内存总量</td>
</tr>
<tr>
<td>245008 used</td>
<td>使用的物理内存总量</td>
</tr>
<tr>
<td>436000 buff/cache</td>
<td>用作内核缓存的内存量</td>
</tr>
<tr>
<td>KiB Swap:  2256892 total</td>
<td>交换区总量</td>
</tr>
<tr>
<td>2221596 free</td>
<td>空闲交换区总量</td>
</tr>
<tr>
<td>35296 used</td>
<td>使用的交换区总量</td>
</tr>
<tr>
<td>540444 avail Mem</td>
<td>可用缓冲的交换区总量</td>
</tr>
</tbody>
</table>
<ul>
<li><p>查找某个进程是否运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">查找firefox是否启动，结果没有</div><div class="line">$ ps aux | grep firefox</div><div class="line">highsung  22559  0.0  0.0 119392   908 pts/0    S+   11:31   0:00 grep --color=auto firefox</div><div class="line">查找nginx是否运行，发现2个进程，1个master，1个worker</div><div class="line">$ ps aux | grep nginx</div><div class="line">root      21802  0.0  0.0  15932   360 ?        Ss   09:50   0:00 nginx: master process /usr/local/nginx/sbin/nginx</div><div class="line">nobody    21803  0.0  0.2  18444  2516 ?        S    09:50   0:00 nginx: worker process</div><div class="line">highsung  22561  0.0  0.0 119392   916 pts/0    S+   11:31   0:00 grep --color=auto nginx</div></pre></td></tr></table></figure>
</li>
<li><p>强制杀死某个进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">杀死nignx进程，9是kill信号，21802和21803是进程号</div><div class="line">$ sudo  kill -9 21802</div><div class="line">[sudo] highsung 的密码：</div><div class="line">$ sudo  kill -9 21803</div><div class="line">$ ps aux | grep nginx</div><div class="line">highsung  22603  0.0  0.0 119392   952 pts/0    S+   11:48   0:00 grep --color=auto nginx</div><div class="line">$</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2-网络管理"><a href="#2-网络管理" class="headerlink" title="2. 网络管理"></a>2. 网络管理</h4><ul>
<li>查看网络适配器，发现有2个：ens33和lo。lo是环回地址，适合本机测试访问。外网访问通过ens33通信。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ ifconfig</div><div class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</div><div class="line">        inet 192.168.124.139  netmask 255.255.255.0  broadcast 192.168.124.255</div><div class="line">        inet6 fe80::17b9:bbb6:331d:db1e  prefixlen 64  scopeid 0x20&lt;link&gt;</div><div class="line">        ether 00:0c:29:8e:58:5c  txqueuelen 1000  (Ethernet)</div><div class="line">        RX packets 277372  bytes 331067727 (315.7 MiB)</div><div class="line">        RX errors 0  dropped 0  overruns 0  frame 0</div><div class="line">        TX packets 82261  bytes 5244773 (5.0 MiB)</div><div class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div><div class="line"></div><div class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</div><div class="line">        inet 127.0.0.1  netmask 255.0.0.0</div><div class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</div><div class="line">        loop  txqueuelen 1  (Local Loopback)</div><div class="line">        RX packets 1227  bytes 317260 (309.8 KiB)</div><div class="line">        RX errors 0  dropped 0  overruns 0  frame 0</div><div class="line">        TX packets 1227  bytes 317260 (309.8 KiB)</div><div class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</div></pre></td></tr></table></figure>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>flags=4163<up,broadcast,running,multicast></up,broadcast,running,multicast></td>
<td>UP（网卡开启状态）RUNNING（网卡的网线被接上）MULTICAST（支持组播）</td>
</tr>
<tr>
<td>mtu 1500</td>
<td>最大物理传输单元字节数</td>
</tr>
<tr>
<td>inet 192.168.124.139</td>
<td>IP地址</td>
</tr>
<tr>
<td>netmask 255.255.255.0</td>
<td>子网掩码</td>
</tr>
<tr>
<td>broadcast 192.168.124.255</td>
<td>广播地址</td>
</tr>
<tr>
<td>ether 00:0c:29:8e:58:5c</td>
<td>Mac地址</td>
</tr>
<tr>
<td>RX packets 277372  bytes 331067727 (315.7 MiB)</td>
<td>接收数据包字节数</td>
</tr>
<tr>
<td>RX errors 0  dropped 0  overruns 0  frame 0</td>
<td>接收错误包，丢包</td>
</tr>
<tr>
<td>TX packets 82261  bytes 5244773 (5.0 MiB)</td>
<td>发送数据包字节数</td>
</tr>
<tr>
<td>TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</td>
<td>发送错误包，丢包</td>
</tr>
</tbody>
</table>
<ul>
<li>dropped，表示这个数据包已经进入到网卡的接收缓存fifo队列，并且开始被系统中断处理准备进行数据包拷贝（从网卡缓存fifo队列拷贝到系统内存），但由于此时的系统原因（比如内存不够等）导致这个数据包被丢掉，即这个数据包被Linux系统丢掉。</li>
<li>overruns，表示这个数据包还没有被进入到网卡的接收缓存fifo队列就被丢掉，因此此时网卡的fifo是满的。为什么fifo会是满的？因为系统繁忙，来不及响应网卡中断，导致网卡里的数据包没有及时的拷贝到系统内存，fifo是满的就导致后面的数据包进不来，即这个数据包被网卡硬件丢掉。所以，个人觉得遇到overruns非0，需要检测cpu负载与cpu中断情况。</li>
</ul>
<p>开关网络适配器：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">关闭ens33</div><div class="line">$ sudo ifconfig ens33 down</div><div class="line">开启ens33</div><div class="line">$ sudo ifconfig ens33 up</div></pre></td></tr></table></figure></p>
<p>测试与其他主机是否可通信：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">ping通一个外网域名，意味本机可以上网，听歌，下载文件等</div><div class="line">$ ping hao123.com</div><div class="line">PING hao123.com (180.149.132.19) 56(84) bytes of data.</div><div class="line">64 bytes from 180.149.132.19 (180.149.132.19): icmp_seq=1 ttl=128 time=75.7 ms</div><div class="line">64 bytes from 180.149.132.19 (180.149.132.19): icmp_seq=2 ttl=128 time=76.1 ms</div><div class="line">64 bytes from 180.149.132.19 (180.149.132.19): icmp_seq=3 ttl=128 time=76.6 ms</div><div class="line">ping通一个局域网地址，意味本机网络软硬件配置正常</div><div class="line">$ ping 192.168.1.1</div><div class="line">PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.</div><div class="line">64 bytes from 192.168.1.1: icmp_seq=1 ttl=128 time=2.00 ms</div><div class="line">64 bytes from 192.168.1.1: icmp_seq=2 ttl=128 time=3.14 ms</div><div class="line">ping不通局域网地址，意味另一台主机未开机，IP有误，防火墙开启等</div><div class="line">$ ping 192.168.1.111</div><div class="line">PING 192.168.1.111 (192.168.1.111) 56(84) bytes of data.</div><div class="line">From 192.168.1.104 icmp_seq=3 Destination Host Unreachable</div></pre></td></tr></table></figure></p>
<p>设置本机IP，子网掩码，广播IP，MTU，Mac:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ifconfig ens33 192.168.124.239 netmask 255.255.255.0 broadcast 192.168.124.255</div><div class="line">ifconfig ens33 mtu 1400</div><div class="line">ifconfig ens33 hw ether 22:AA:BB:CC:DD:EE</div></pre></td></tr></table></figure></p>
<p>最后说下虚拟机访问网络的问题：</p>
<ol>
<li>当虚拟机需要访问外网，比如通过apt-get，dnf安装软件时：需要在虚拟机软件中把Linux网络适配器修改成“NAT模式”，系统自动获取IP即可。</li>
</ol>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_6/20170320124721.png" alt="image"></p>
<ol>
<li>当虚拟机需要局域网通信，比如访问开发板，挂载nfs系统时：需要在虚拟机软件中把Linux网络适配器修改成“桥接模式”，手动设置系统的局域网IP，设置前可以先ping下准备设置的IP是否已被占用。</li>
</ol>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_6/20170320124826.png" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/20/course/embeded/lesson_6/" data-id="cj0mizkzl0016j0uf1bjshxpf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/19/course/embeded/lesson_5/" class="article-date">
  <time datetime="2017-03-19T14:30:00.000Z" itemprop="datePublished">2017-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/19/course/embeded/lesson_5/">（5）Linux常用命令-软件管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="Linux系统分类"><a href="#Linux系统分类" class="headerlink" title="Linux系统分类"></a>Linux系统分类</h4><h4 id="软件包安装原理和命令"><a href="#软件包安装原理和命令" class="headerlink" title="软件包安装原理和命令"></a>软件包安装原理和命令</h4><h4 id="在线安装和手动下载源码安装"><a href="#在线安装和手动下载源码安装" class="headerlink" title="在线安装和手动下载源码安装"></a>在线安装和手动下载源码安装</h4><hr>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_5/install_soft.jpg" alt="image"></p>
<h5 id="大多数现代类-Unix-操作系统都提供了一个集中的软件包管理机制，以帮助用户搜索、安装和管理软件。而软件通常以「包」的形式存储在仓库「repository」中，对软件包的使用和管理被称为包管理。而-Linux-包的基本组成部分通常有：共享库、应用程序、服务和文档。"><a href="#大多数现代类-Unix-操作系统都提供了一个集中的软件包管理机制，以帮助用户搜索、安装和管理软件。而软件通常以「包」的形式存储在仓库「repository」中，对软件包的使用和管理被称为包管理。而-Linux-包的基本组成部分通常有：共享库、应用程序、服务和文档。" class="headerlink" title="大多数现代类 Unix 操作系统都提供了一个集中的软件包管理机制，以帮助用户搜索、安装和管理软件。而软件通常以「包」的形式存储在仓库「repository」中，对软件包的使用和管理被称为包管理。而 Linux 包的基本组成部分通常有：共享库、应用程序、服务和文档。"></a>大多数现代类 Unix 操作系统都提供了一个集中的软件包管理机制，以帮助用户搜索、安装和管理软件。而软件通常以「包」的形式存储在仓库「repository」中，对软件包的使用和管理被称为包管理。而 Linux 包的基本组成部分通常有：共享库、应用程序、服务和文档。</h5><h5 id="包管理通常不仅限于软件的一次性安装，还包括了对已安装软件包进行升级的工具。「包仓库」有助于确保代码已经在你使用的系统上进行了审核，并由软件开发者或包维护者进行管理。"><a href="#包管理通常不仅限于软件的一次性安装，还包括了对已安装软件包进行升级的工具。「包仓库」有助于确保代码已经在你使用的系统上进行了审核，并由软件开发者或包维护者进行管理。" class="headerlink" title="包管理通常不仅限于软件的一次性安装，还包括了对已安装软件包进行升级的工具。「包仓库」有助于确保代码已经在你使用的系统上进行了审核，并由软件开发者或包维护者进行管理。"></a>包管理通常不仅限于软件的一次性安装，还包括了对已安装软件包进行升级的工具。「包仓库」有助于确保代码已经在你使用的系统上进行了审核，并由软件开发者或包维护者进行管理。</h5><h5 id="本文将介绍常用-Linux-发行版对：搜索、安装和升级等包管理方面的基本方式和快速参考，可以帮助你快速了解不同-Linux-包管理基本操作与技巧。"><a href="#本文将介绍常用-Linux-发行版对：搜索、安装和升级等包管理方面的基本方式和快速参考，可以帮助你快速了解不同-Linux-包管理基本操作与技巧。" class="headerlink" title="本文将介绍常用 Linux 发行版对：搜索、安装和升级等包管理方面的基本方式和快速参考，可以帮助你快速了解不同 Linux 包管理基本操作与技巧。"></a>本文将介绍常用 Linux 发行版对：搜索、安装和升级等包管理方面的基本方式和快速参考，可以帮助你快速了解不同 Linux 包管理基本操作与技巧。</h5><h4 id="1-软件包管理介绍"><a href="#1-软件包管理介绍" class="headerlink" title="1. 软件包管理介绍"></a>1. 软件包管理介绍</h4><p>大多数流行的 Linux 发行版在包管理工具、方式和形式都大同小异，但却还是有平台差异。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>静态安装包格式</th>
<th>在线安装命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian</td>
<td>.deb</td>
<td>apt, apt-cache、apt-get、dpkg</td>
</tr>
<tr>
<td>Ubuntu</td>
<td>.deb</td>
<td>apt、apt-cache、apt-get、dpkg</td>
</tr>
<tr>
<td>CentOS</td>
<td>.rpm</td>
<td>yum</td>
</tr>
<tr>
<td>Fedora</td>
<td>.rpm</td>
<td>yum、dnf</td>
</tr>
</tbody>
</table>
<p>Debian及其衍生产品如：Ubuntu、Linux Mint 和 Raspbian 的安装包格式为.deb文件，apt-get是最常见包操作命令，可搜索库、安装包及其依赖和管理升级。而要直接安装现成.deb包时需要使用dpkg命令。</p>
<p>CentOS、Fedora及Red Hat系列Linux使用RPM安装包文件，并使用yum命令管理包文件。</p>
<p>在最新的Fedora版本中，yum命令已被dnf取代进行包管理。</p>
<h4 id="2-更新本地包数据库列表"><a href="#2-更新本地包数据库列表" class="headerlink" title="2. 更新本地包数据库列表"></a>2. 更新本地包数据库列表</h4><p>大多数 Linux 都使用本地数据库来存储远程可用的包仓库列表，所以在安装或升级包之前最好更新一下这个数据库。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian / Ubuntu</td>
<td>sudo apt-get update</td>
</tr>
<tr>
<td>CentOS</td>
<td>yum check-update</td>
</tr>
<tr>
<td>Fedora</td>
<td>dnf check-update</td>
</tr>
</tbody>
</table>
<h4 id="3-升级已安装的包"><a href="#3-升级已安装的包" class="headerlink" title="3. 升级已安装的包"></a>3. 升级已安装的包</h4><p>在没有包管理方式时，要升级并保持 Linux 已装软件处在最新版本是一个巨大的工程，管理员和用户不得不手动跟踪上游软件版本变化及安全警告。在有了包管理系统之后，只需几条命令便可保持软件最新。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian / Ubuntu</td>
<td>sudo apt-get upgrade</td>
<td>仅升级已安装的软件包</td>
</tr>
<tr>
<td></td>
<td>sudo apt-get dist-upgrade</td>
<td>可添加或删除程序包，以满足新的依赖。</td>
</tr>
<tr>
<td>CentOS</td>
<td>sudo yum update</td>
<td></td>
</tr>
<tr>
<td>Fedora</td>
<td>sudo dnf upgrade</td>
</tr>
</tbody>
</table>
<h4 id="4-查找-搜索软件包"><a href="#4-查找-搜索软件包" class="headerlink" title="4. 查找/搜索软件包"></a>4. 查找/搜索软件包</h4><p>大多数 Linux 桌面版本都提供用户可搜索和安装软包的界面，这是找寻和安装软件的最佳方法。但对于追求效率和服务器管理员来说，使用命令行工具查找/搜索软件包才是正途。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian / Ubuntu</td>
<td>apt-cache search</td>
<td>搜索内容</td>
</tr>
<tr>
<td>CentOS</td>
<td>yum search</td>
<td>搜索内容</td>
</tr>
<tr>
<td></td>
<td>yum search all</td>
<td>搜索所有内容，包括包描述</td>
</tr>
<tr>
<td>Fedora</td>
<td>dnf search</td>
<td>搜索内容</td>
</tr>
<tr>
<td></td>
<td>dnf search all</td>
<td>搜索所有内容，包括包描述</td>
</tr>
</tbody>
</table>
<h4 id="5-查看某个软件包信息"><a href="#5-查看某个软件包信息" class="headerlink" title="5. 查看某个软件包信息"></a>5. 查看某个软件包信息</h4><p>在决定安装哪个包之前，我们往往都需要查看该软件包的详细说明。包的说明文件中通常包括：包名、版本号及依赖列表等元数据，可以使用如下命令来查看。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian / Ubuntu</td>
<td>apt-cache show 包名</td>
<td>显示有关软件包的本地缓存信息</td>
</tr>
<tr>
<td></td>
<td>dpkg -s 包名</td>
<td>显示包的当前安装状态</td>
</tr>
<tr>
<td>CentOS</td>
<td>yum info 包名</td>
<td></td>
</tr>
<tr>
<td></td>
<td>yum deplist 包名</td>
<td>列出包的所有信息</td>
</tr>
<tr>
<td>Fedora</td>
<td>dnf info 包名</td>
<td></td>
</tr>
<tr>
<td></td>
<td>dnf repoquery –requires 包名</td>
<td>列出包的所有信息</td>
</tr>
</tbody>
</table>
<h4 id="6-从软件仓库安装包"><a href="#6-从软件仓库安装包" class="headerlink" title="6. 从软件仓库安装包"></a>6. 从软件仓库安装包</h4><p>一旦我们知道某个软件包的名称之后，便可以使用如下命令从软件仓库安装包。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian / Ubuntu</td>
<td>sudo apt-get install 包名</td>
<td></td>
</tr>
<tr>
<td></td>
<td>sudo apt-get install 包1 包2 …</td>
<td>安装所有列出的包</td>
</tr>
<tr>
<td></td>
<td>sudo apt-get install -y 包名</td>
<td>无需提示直接安装</td>
</tr>
<tr>
<td>CentOS</td>
<td>sudo yum install 包名</td>
<td></td>
</tr>
<tr>
<td></td>
<td>sudo yum install 包1 包2 …</td>
<td>安装所有列出的包</td>
</tr>
<tr>
<td></td>
<td>sudo yum install -y 包名</td>
<td>无需提示直接安装</td>
</tr>
<tr>
<td>Fedora</td>
<td>sudo dnf install 包名</td>
<td></td>
</tr>
<tr>
<td></td>
<td>sudo dnf install 包1 包2 …</td>
<td>安装所有列出的包</td>
</tr>
<tr>
<td></td>
<td>sudo dnf install -y 包名</td>
<td>无需提示直接安装</td>
</tr>
</tbody>
</table>
<h4 id="7-从本地文件系统直接安装包"><a href="#7-从本地文件系统直接安装包" class="headerlink" title="7. 从本地文件系统直接安装包"></a>7. 从本地文件系统直接安装包</h4><p>很多时候，我们在进行测试或从某个地方直接拿到软件包之后需要从本地文件系统直接安装包。Debian 及衍生系统可以使用 dpkg 进行安装，CentOS 和 Fedora 系统使用 yum 和 dnf 命令进行安装。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian / Ubuntu</td>
<td>sudo dpkg -i 包名.deb</td>
<td></td>
</tr>
<tr>
<td></td>
<td>sudo apt-get install -y gdebi&amp;&amp; sudo gdebi 包名.deb</td>
<td>使用gdebi检索缺少的依赖关系</td>
</tr>
<tr>
<td>CentOS</td>
<td>sudo yum install 包名.rpm</td>
<td></td>
</tr>
<tr>
<td>Fedora</td>
<td>sudo dnf install 包名.rpm</td>
</tr>
</tbody>
</table>
<h4 id="8-移除已安装的包"><a href="#8-移除已安装的包" class="headerlink" title="8. 移除已安装的包"></a>8. 移除已安装的包</h4><p>由于包管理器知道哪些文件是由哪个包提供的，所以在卸载不需要的软件包之后通常可以获得一个干净的系统。</p>
<table>
<thead>
<tr>
<th>系统</th>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian / Ubuntu</td>
<td>sudo apt-get remove 包名</td>
<td></td>
</tr>
<tr>
<td></td>
<td>sudo apt-get autoremove</td>
<td>自动移除不需要的包</td>
</tr>
<tr>
<td>CentOS</td>
<td>sudo yum remove 包名</td>
<td></td>
</tr>
<tr>
<td>Fedora</td>
<td>sudo dnf erase 包名</td>
</tr>
</tbody>
</table>
<h4 id="9-动手安装qtcreator，firefox"><a href="#9-动手安装qtcreator，firefox" class="headerlink" title="9. 动手安装qtcreator，firefox"></a>9. 动手安装qtcreator，firefox</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo dnf install -y qtcreator</div><div class="line">$ sudo dnf install -y firefox</div></pre></td></tr></table></figure>
<h4 id="10-编译源码方式，安装nginx"><a href="#10-编译源码方式，安装nginx" class="headerlink" title="10. 编译源码方式，安装nginx"></a>10. 编译源码方式，安装nginx</h4><ul>
<li><a href="http://nginx.org/download/nginx-1.11.10.tar.gz" target="_blank" rel="external">点击</a>下载nginx源码</li>
<li><p>解压源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar zxvf nginx-1.11.10.tar.gz</div></pre></td></tr></table></figure>
</li>
<li><p>配置并编译</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cd nginx-1.11.10</div><div class="line">$ ./configure --without-http_rewrite_module --without-http_gzip_module</div><div class="line">$ make</div></pre></td></tr></table></figure>
</li>
<li><p>安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo make install</div></pre></td></tr></table></figure>
</li>
<li><p>运行nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo /usr/local/nginx/sbin/nginx</div></pre></td></tr></table></figure>
</li>
<li><p>打开firefox，访问<a href="http://127.0.0.1" target="_blank" rel="external">http://127.0.0.1</a><br><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_5/20170319234932.png" alt="image"></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/19/course/embeded/lesson_5/" data-id="cj0mizkzn0019j0ufoohr541x" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/19/course/embeded/lesson_4/" class="article-date">
  <time datetime="2017-03-19T01:45:00.000Z" itemprop="datePublished">2017-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/19/course/embeded/lesson_4/">（4）Linux常用命令-账号管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="修改账号密码"><a href="#修改账号密码" class="headerlink" title="修改账号密码"></a>修改账号密码</h4><h4 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h4><h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><hr>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_4/user.jpg" alt="image"></p>
<h5 id="Linux和Windows最大不同之处，就是从账号登录开始。Windows下大多数用户习惯开机即用，跳过登录窗口。而Linux环境则强制用户选择账号密码登录。虽然Linux整体账号设计比Windows更严谨，但增强我们的安全意识更重要。"><a href="#Linux和Windows最大不同之处，就是从账号登录开始。Windows下大多数用户习惯开机即用，跳过登录窗口。而Linux环境则强制用户选择账号密码登录。虽然Linux整体账号设计比Windows更严谨，但增强我们的安全意识更重要。" class="headerlink" title="Linux和Windows最大不同之处，就是从账号登录开始。Windows下大多数用户习惯开机即用，跳过登录窗口。而Linux环境则强制用户选择账号密码登录。虽然Linux整体账号设计比Windows更严谨，但增强我们的安全意识更重要。"></a>Linux和Windows最大不同之处，就是从账号登录开始。Windows下大多数用户习惯开机即用，跳过登录窗口。而Linux环境则强制用户选择账号密码登录。虽然Linux整体账号设计比Windows更严谨，但增强我们的安全意识更重要。</h5><h5 id="对于初学者，习惯拿root账号登录和后续操作，须不知会埋下诸多雷。因为root权限下访问和生成的一些文件，切换成其他账号登录后，很可能无对等权限访问。也有人会说，这个Linux系统就我一人使用，拿root登录可不可以，答案当然是可以。但你要清楚root权限下操作对系统所带来的影响。root账号拥有系统最高权限，所谓权利越大，责任越大。"><a href="#对于初学者，习惯拿root账号登录和后续操作，须不知会埋下诸多雷。因为root权限下访问和生成的一些文件，切换成其他账号登录后，很可能无对等权限访问。也有人会说，这个Linux系统就我一人使用，拿root登录可不可以，答案当然是可以。但你要清楚root权限下操作对系统所带来的影响。root账号拥有系统最高权限，所谓权利越大，责任越大。" class="headerlink" title="对于初学者，习惯拿root账号登录和后续操作，须不知会埋下诸多雷。因为root权限下访问和生成的一些文件，切换成其他账号登录后，很可能无对等权限访问。也有人会说，这个Linux系统就我一人使用，拿root登录可不可以，答案当然是可以。但你要清楚root权限下操作对系统所带来的影响。root账号拥有系统最高权限，所谓权利越大，责任越大。"></a>对于初学者，习惯拿root账号登录和后续操作，须不知会埋下诸多雷。因为root权限下访问和生成的一些文件，切换成其他账号登录后，很可能无对等权限访问。也有人会说，这个Linux系统就我一人使用，拿root登录可不可以，答案当然是可以。但你要清楚root权限下操作对系统所带来的影响。root账号拥有系统最高权限，所谓权利越大，责任越大。</h5><h5 id="建议玩法：创建一个非root账号登录，需要更高权限执行命令时，可以在命令前加sudo，sudo命令的含义是以root权限执行。"><a href="#建议玩法：创建一个非root账号登录，需要更高权限执行命令时，可以在命令前加sudo，sudo命令的含义是以root权限执行。" class="headerlink" title="建议玩法：创建一个非root账号登录，需要更高权限执行命令时，可以在命令前加sudo，sudo命令的含义是以root权限执行。"></a>建议玩法：创建一个非root账号登录，需要更高权限执行命令时，可以在命令前加sudo，sudo命令的含义是以root权限执行。</h5><h4 id="1-修改账号密码"><a href="#1-修改账号密码" class="headerlink" title="1. 修改账号密码"></a>1. 修改账号密码</h4><p>  查看当前账号<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">显示当前账户</div><div class="line">$ whoami   </div><div class="line">highsung</div><div class="line">切换到root</div><div class="line">$ su root  </div><div class="line">密码：</div><div class="line"># whoami</div><div class="line">root</div><div class="line"># su highsung</div><div class="line">$</div></pre></td></tr></table></figure></p>
<p>  修改密码，fedora25中密码必须是8个及以上字符，且不能全是数字。<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ passwd</div><div class="line">更改用户 highsung 的密码 。</div><div class="line">为 highsung 更改 STRESS 密码。</div><div class="line">Current password:</div><div class="line">新的 密码：</div><div class="line">重新输入新的 密码：</div><div class="line">passwd：所有的身份验证令牌已经成功更新。</div></pre></td></tr></table></figure></p>
<p>  当然也可在root账号下，修改其他账号密码。<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ su root</div><div class="line">密码：</div><div class="line"># passwd highsung</div><div class="line">更改用户 highsung 的密码 。</div><div class="line">新的 密码：</div><div class="line">重新输入新的 密码：</div><div class="line">passwd：所有的身份验证令牌已经成功更新。</div></pre></td></tr></table></figure></p>
<h4 id="2-用户组管理"><a href="#2-用户组管理" class="headerlink" title="2. 用户组管理"></a>2. 用户组管理</h4><p>在操作用户组前，我们先来看看/etc/passwd，/etc/shadow，/etc/group这三个文件内容。<br>/etc/passwd中每一行记录着一个用户信息，每行记录被冒号(:)分隔为7个字段，其格式和具体含义如下：<br>用户名:口令:用户标识ID:组标识ID:注释性描述:主目录:登录Shell。<br>下面的口令字段都是x，代表这项没有值。因为所有用户的口令信息都存放在/etc/shadow中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ sudo cat /etc/passwd</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">...</div><div class="line">highsung:x:1000:1000:highsung:/home/highsung:/bin/bash</div></pre></td></tr></table></figure></p>
<p>/etc/shadow中每一行记录着一个用户口令信息，每行记录被冒号(:)分隔为9个字段，其格式和具体含义如下：<br>用户名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志<br>下面的加密口令为*，代表这项没有值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ sudo cat /etc/shadow</div><div class="line">root:$6$q4pnE9vO4cv6ayga$ywkgbdr8YZQrjXFV0nZ.0HJE.zPrXAgzWErsPYZo67gyXvXRSbxqZAqWvnD1SGBOV/CJ2RSxgjGtXaP6KaYxN/::0:99999:7:::</div><div class="line">bin:*:17004:0:99999:7:::</div><div class="line">daemon:*:17004:0:99999:7:::</div><div class="line">...</div><div class="line">highsung:$6$Qo5xOJ5rqfOEjSb6$Ot1VLazAFvq1c0WQ.Ms1QhJFqgoG0P36FXsrygGfdcJvGDZTAk8vGtOA8wWLmKX5bNDTFCFSGQOKnmcLn5fcn.:17244:0:99999:7:::</div></pre></td></tr></table></figure></p>
<p>/etc/group中每一行记录着一个用户组信息，每行记录被冒号(:)分隔为4个字段，其格式和具体含义如下：<br>组名:口令:组标识ID:组内用户列表<br>下面的口令为x，代表这项没有值。<br>wheel是管理员组，组员有highsung。因为安装fedora25时，highsung设置成了管理员。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$ sudo cat /etc/group</div><div class="line">root:x:0:</div><div class="line">bin:x:1:</div><div class="line">daemon:x:2:</div><div class="line">sys:x:3:</div><div class="line">adm:x:4:</div><div class="line">tty:x:5:</div><div class="line">disk:x:6:</div><div class="line">lp:x:7:</div><div class="line">mem:x:8:</div><div class="line">kmem:x:9:</div><div class="line">wheel:x:10:highsung</div><div class="line">...</div><div class="line">highsung:x:1000:</div></pre></td></tr></table></figure></p>
<p>清楚了文件/etc/passwd，/etc/shadow，/etc/group的内容含义，下面先来操作下用户组。</p>
<ul>
<li><p>创建用户组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">创建mygroup1组</div><div class="line">$ sudo groupadd mygroup1      </div><div class="line">创建mygroup2组，同时指定组ID</div><div class="line">$ sudo groupadd -g 1010 mygroup2  </div><div class="line">创建mygroup3组</div><div class="line">$ sudo groupadd mygroup3  </div><div class="line">$ cat /etc/group</div><div class="line">...</div><div class="line">highsung:x:1000:</div><div class="line">组ID是在最后的highsung组ID上加1</div><div class="line">mygroup1:x:1001:  </div><div class="line">组ID强制指定1010</div><div class="line">mygroup2:x:1010:</div><div class="line">组ID是在最后的mygroup2组ID上加1</div><div class="line">mygroup3:x:1011:</div></pre></td></tr></table></figure>
</li>
<li><p>修改用户组<br>根据组名来修改，把mygroup3组的组名改成mygroup31，组ID改成1031</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ sudo groupmod -g 1031 -n mygroup31 mygroup3</div><div class="line">$ cat /etc/group</div><div class="line">...</div><div class="line">highsung:x:1000:</div><div class="line">mygroup1:x:1001:</div><div class="line">mygroup2:x:1010:</div><div class="line">mygroup31:x:1031:</div></pre></td></tr></table></figure>
</li>
<li><p>删除用户组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ sudo groupdel mygroup31</div><div class="line">$ sudo groupdel mygroup2</div><div class="line">$ cat /etc/group</div><div class="line">...</div><div class="line">highsung:x:1000:</div><div class="line">mygroup1:x:1001:</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3-用户管理"><a href="#3-用户管理" class="headerlink" title="3. 用户管理"></a>3. 用户管理</h4><ul>
<li><p>创建用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">创建user1</div><div class="line">$ sudo useradd user1  </div><div class="line">设置user1密码</div><div class="line">$ sudo passwd user1    </div><div class="line">查看用户组，发现存在以user1命名的用户组</div><div class="line">$ cat /etc/group</div><div class="line">...  </div><div class="line">highsung:x:1000:</div><div class="line">mygroup1:x:1001:</div><div class="line">user1:x:1002:</div><div class="line">创建user2，并指定到mygroup1组，附加到wheel组</div><div class="line">$ sudo useradd user2 -g mygroup1 -G wheel</div><div class="line">$ cat /etc/group</div><div class="line">...</div><div class="line">user2也是管理员权限</div><div class="line">wheel:x:10:highsung,user2</div><div class="line">highsung:x:1000:</div><div class="line">mygroup1:x:1001:</div><div class="line">user1:x:1002:</div></pre></td></tr></table></figure>
</li>
<li><p>修改用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">user1添加到wheel组</div><div class="line">$ sudo usermod -G wheel user1</div><div class="line">$ cat /etc/group</div><div class="line">wheel:x:10:highsung,user2,user1</div><div class="line">user1名字改为user11</div><div class="line">$ sudo usermod -l user11 user1</div><div class="line">$ cat /etc/group</div><div class="line">wheel:x:10:highsung,user2,user11</div><div class="line">usr11的主目录还是/home/user1</div><div class="line">$ cat /etc/passwd</div><div class="line">user11:x:1001:1002::/home/user1:/bin/bash</div></pre></td></tr></table></figure>
</li>
<li><p>删除用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">删除3个文件中user2的记录，保留home目录</div><div class="line">$ sudo userdel user2</div><div class="line">删除3个文件中user2的记录，删除home目录</div><div class="line">$ sudo userdel -r user1</div></pre></td></tr></table></figure>
</li>
</ul>
<p>留个问题：root账号密码忘了怎么办？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/19/course/embeded/lesson_4/" data-id="cj0mizkz5000qj0uf73et144u" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/16/course/embeded/lesson_3/" class="article-date">
  <time datetime="2017-03-16T03:45:00.000Z" itemprop="datePublished">2017-03-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/16/course/embeded/lesson_3/">（3）Linux常用命令-文件操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="查看目录和文件"><a href="#查看目录和文件" class="headerlink" title="查看目录和文件"></a>查看目录和文件</h4><h4 id="文件的基本操作"><a href="#文件的基本操作" class="headerlink" title="文件的基本操作"></a>文件的基本操作</h4><h4 id="文件压缩和解压"><a href="#文件压缩和解压" class="headerlink" title="文件压缩和解压"></a>文件压缩和解压</h4><hr>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_3/cmdline.jpg" alt="image"></p>
<h5 id="在fedora25系统的-bin目录下有1530多个命令，绝大部分命令是我们平常都用不到，这里选取了一组常用命令，我们先从文件操作命令开始介绍。文章最后附有Linux命令大全手册，供大家查阅。"><a href="#在fedora25系统的-bin目录下有1530多个命令，绝大部分命令是我们平常都用不到，这里选取了一组常用命令，我们先从文件操作命令开始介绍。文章最后附有Linux命令大全手册，供大家查阅。" class="headerlink" title="在fedora25系统的/bin目录下有1530多个命令，绝大部分命令是我们平常都用不到，这里选取了一组常用命令，我们先从文件操作命令开始介绍。文章最后附有Linux命令大全手册，供大家查阅。"></a>在fedora25系统的/bin目录下有1530多个命令，绝大部分命令是我们平常都用不到，这里选取了一组常用命令，我们先从文件操作命令开始介绍。文章最后附有Linux命令大全手册，供大家查阅。</h5><ul>
<li><h6 id="pwd-显示当前目录"><a href="#pwd-显示当前目录" class="headerlink" title="pwd 显示当前目录"></a>pwd 显示当前目录</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ pwd  </div><div class="line">/home/highsung</div></pre></td></tr></table></figure>
</li>
<li><h6 id="cd-切换目录"><a href="#cd-切换目录" class="headerlink" title="cd  切换目录"></a>cd  切换目录</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">切换到根目录</div><div class="line">$ cd /  </div><div class="line">$ pwd</div><div class="line">/</div><div class="line">什么都不指定，切换到用户目录</div><div class="line">$ cd    </div><div class="line">$ pwd</div><div class="line">/home/highsung</div><div class="line">~代表用户目录，同cd</div><div class="line">$ cd ~  </div><div class="line">$ pwd</div><div class="line">/home/highsung</div></pre></td></tr></table></figure>
</li>
<li><h6 id="ls-显示目录内容"><a href="#ls-显示目录内容" class="headerlink" title="ls  显示目录内容"></a>ls  显示目录内容</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">$ ls     </div><div class="line">Desktop  公共  模板  视频  图片  文档  下载  音乐</div><div class="line">详细文件列表，.文件是隐藏文件</div><div class="line">$ ls -al  </div><div class="line">总用量 80</div><div class="line">drwx------. 14 highsung highsung 4096 3月  18 12:41 .</div><div class="line">drwxr-xr-x.  4 root     root     4096 3月  17 01:36 ..</div><div class="line">-rw-------.  1 highsung highsung   62 3月  17 10:42 .bash_history</div><div class="line">-rw-r--r--.  1 highsung highsung   18 9月  30 16:25 .bash_logout</div><div class="line">-rw-r--r--.  1 highsung highsung  193 9月  30 16:25 .bash_profile</div><div class="line">-rw-r--r--.  1 highsung highsung  231 9月  30 16:25 .bashrc</div><div class="line">drwx------.  6 highsung highsung 4096 3月  18 12:43 .cache</div><div class="line">drwxr-xr-x. 17 highsung highsung 4096 3月  17 10:34 .config</div><div class="line">drwxrwxr-x.  2 highsung highsung 4096 3月  17 01:41 Desktop</div><div class="line">-rw-------.  1 highsung highsung   16 3月  17 01:41 .esd_auth</div><div class="line">drwxr-xr-x.  3 highsung highsung 4096 3月  17 01:41 .local</div><div class="line">drwx------.  4 highsung highsung 4096 3月  17 10:33 .thumbnails</div><div class="line">-rw-------.  1 highsung highsung   66 3月  18 12:41 .Xauthority</div><div class="line">-rw-------.  1 highsung highsung    0 3月  18 12:41 .xsession-errors</div><div class="line">drwxr-xr-x.  2 highsung highsung 4096 3月  17 01:41 公共</div><div class="line">drwxr-xr-x.  2 highsung highsung 4096 3月  17 01:41 模板</div><div class="line">drwxr-xr-x.  2 highsung highsung 4096 3月  17 01:41 视频</div><div class="line">drwxr-xr-x.  2 highsung highsung 4096 3月  17 01:41 图片</div><div class="line">drwxr-xr-x.  2 highsung highsung 4096 3月  17 01:41 文档</div><div class="line">drwxr-xr-x.  2 highsung highsung 4096 3月  17 01:41 下载</div><div class="line">drwxr-xr-x.  2 highsung highsung 4096 3月  17 01:41 音乐</div></pre></td></tr></table></figure>
</li>
<li><h6 id="cat-显示文件内容"><a href="#cat-显示文件内容" class="headerlink" title="cat 显示文件内容"></a>cat 显示文件内容</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">查看cpu信息</div><div class="line">$ cat /proc/cpuinfo  </div><div class="line">processor	: 0</div><div class="line">vendor_id	: GenuineIntel</div><div class="line">cpu family	: 6</div><div class="line">model		: 60</div><div class="line">model name	: Intel(R) Core(TM) i7-4700MQ CPU @ 2.40GHz</div><div class="line">stepping	: 3</div><div class="line">microcode	: 0x1e</div><div class="line">cpu MHz		: 2400.863</div><div class="line">cache size	: 6144 KB</div><div class="line">...</div><div class="line">查看内存信息</div><div class="line">$ sudo cat /proc/meminfo  </div><div class="line">MemTotal:         997172 kB</div><div class="line">MemFree:          309776 kB</div><div class="line">MemAvailable:     555220 kB</div><div class="line">Buffers:           24900 kB</div><div class="line">Cached:           336572 kB</div><div class="line">SwapCached:            0 kB</div><div class="line">Active:           349676 kB</div><div class="line">Inactive:         194512 kB</div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><h6 id="grep-查找文本中特定的字符串"><a href="#grep-查找文本中特定的字符串" class="headerlink" title="grep 查找文本中特定的字符串"></a>grep 查找文本中特定的字符串</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">查找kthreadd进程</div><div class="line">$ ps aux | grep kthreadd  </div><div class="line">root          2  0.0  0.0      0     0 ?        S    12:21   0:00 [kthreadd]</div></pre></td></tr></table></figure>
<ul>
<li>上面命令的含义：ps aux命令结果输入到一个管道中，再用grep后的参数过滤</li>
<li>| 代表管道，常常配合grep命令使用</li>
<li>grep后的参数，也可以正则表达式</li>
</ul>
</li>
<li><h6 id="touch-创建文件，或者更新文件创建时间"><a href="#touch-创建文件，或者更新文件创建时间" class="headerlink" title="touch 创建文件，或者更新文件创建时间"></a>touch 创建文件，或者更新文件创建时间</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">创建文件a.txt</div><div class="line">$ touch a.txt    </div><div class="line">$ ls</div><div class="line">a.txt  Desktop  公共  模板  视频  图片  文档  下载  音乐</div><div class="line">$ touch b.txt</div><div class="line">$ ls -al b.txt</div><div class="line">-rw-rw-r--. 1 highsung highsung 0 3月  18 19:11 b.txt</div><div class="line">$ touch b.txt</div><div class="line">$ ls -al b.txt</div><div class="line">-rw-rw-r--. 1 highsung highsung 0 3月  18 19:12 b.txt</div></pre></td></tr></table></figure>
</li>
<li><h6 id="ln-创建链接"><a href="#ln-创建链接" class="headerlink" title="ln    创建链接"></a>ln    创建链接</h6><p>ln命令用来为文件创件链接，链接类型分为硬链接和符号链接两种，默认的链接类型是硬连接。如果要创建符号链接必须使用”-s”选项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">创建一个符号链接</div><div class="line">$ ln -s a.txt c  </div><div class="line">$ ls -l</div><div class="line">总用量 32</div><div class="line">-rw-rw-r--. 1 highsung highsung    0 3月  18 19:12 a.txt</div><div class="line">-rw-rw-r--. 1 highsung highsung    0 3月  18 19:15 b.txt</div><div class="line">lrwxrwxrwx. 1 highsung highsung    5 3月  18 19:17 c -&gt; a.txt</div></pre></td></tr></table></figure>
<ul>
<li>格式：ln -s   源文件   目标文件</li>
</ul>
</li>
<li><h6 id="mv-移动文件或者修改文件名"><a href="#mv-移动文件或者修改文件名" class="headerlink" title="mv    移动文件或者修改文件名"></a>mv    移动文件或者修改文件名</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">文件改名</div><div class="line">$ mv a.txt a1.txt   </div><div class="line">$ ls</div><div class="line">a1.txt  b.txt  c  Desktop  公共  模板  视频  图片  文档  下载  音乐</div><div class="line">文件移动</div><div class="line">$ mv a1.txt 文档    </div><div class="line">$ ls</div><div class="line">b.txt  c  Desktop  公共  模板  视频  图片  文档  下载  音乐</div><div class="line">$ cd 文档</div><div class="line">$ ls</div><div class="line">a1.txt</div></pre></td></tr></table></figure>
</li>
<li><h6 id="cp-复制文件"><a href="#cp-复制文件" class="headerlink" title="cp    复制文件"></a>cp    复制文件</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">从b.txt复制a.txt</div><div class="line">$ cp b.txt a.txt    </div><div class="line">a，b复制到mydir   </div><div class="line">$ cp *.txt mydir  </div><div class="line">mydir复制一份mydir2     </div><div class="line">$ cp -r mydir mydir2   </div><div class="line">$ cd mydir2</div><div class="line">$ ls</div><div class="line">a.txt  b.txt</div></pre></td></tr></table></figure>
<ul>
<li>复制目录加-r选项</li>
</ul>
</li>
<li><h6 id="rm-删除文件"><a href="#rm-删除文件" class="headerlink" title="rm    删除文件"></a>rm    删除文件</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ ls</div><div class="line">a.txt  b.txt  c  Desktop  mydir  mydir2  公共  模板  视频  图片  文档  下载  音乐</div><div class="line">删除当前目录下所有txt文件</div><div class="line">$ rm *.txt      </div><div class="line">$ ls</div><div class="line">c  Desktop  mydir  mydir2  公共  模板  视频  图片  文档  下载  音乐</div><div class="line">$ rm mydir2</div><div class="line">rm: 无法删除&apos;mydir2&apos;: Is a directory</div><div class="line">删除mydir2目录</div><div class="line">$ rm -r mydir2  </div><div class="line">$ ls</div><div class="line">c  Desktop  mydir  公共  模板  视频  图片  文档  下载  音乐</div></pre></td></tr></table></figure>
<ul>
<li>删除目录加-r选项</li>
</ul>
</li>
<li><h6 id="mkdir-创建目录"><a href="#mkdir-创建目录" class="headerlink" title="mkdir 创建目录"></a>mkdir 创建目录</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir mydir</div></pre></td></tr></table></figure>
</li>
<li><h6 id="chmod-修改文件权限"><a href="#chmod-修改文件权限" class="headerlink" title="chmod 修改文件权限"></a>chmod 修改文件权限</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$ ls -al a.txt</div><div class="line">-rw-rw-r--. 1 highsung highsung 0 3月  18 19:56 a.txt</div><div class="line">$ chmod 777 a.txt</div><div class="line">$ ls -al a.txt</div><div class="line">-rwxrwxrwx. 1 highsung highsung 0 3月  18 19:56 a.txt</div><div class="line">$ chmod 664 a.txt</div><div class="line">$ ls -al a.txt</div><div class="line">-rw-rw-r--. 1 highsung highsung 0 3月  18 19:56 a.txt</div><div class="line">$ chmod +x a.txt</div><div class="line">$ ls -al a.txt</div><div class="line">-rwxrwxr-x. 1 highsung highsung 0 3月  18 19:56 a.txt</div><div class="line">$ chmod +w a.txt</div><div class="line">$ ls -al a.txt</div><div class="line">-rwxrwxr-x. 1 highsung highsung 0 3月  18 19:56 a.txt</div><div class="line">$ chmod -w a.txt</div><div class="line">$ ls -al a.txt</div><div class="line">-r-xr-xr-x. 1 highsung highsung 0 3月  18 19:56 a.txt</div></pre></td></tr></table></figure>
<ul>
<li>7（111二进制）代表对文件有rwx的权限，6（110二进制）代表对文件有rw权限，没有x权限。</li>
<li>+x，+w代表增加x，w权限，-x，-w代表取消x，w权限。</li>
</ul>
</li>
<li><h6 id="find-查找文件"><a href="#find-查找文件" class="headerlink" title="find  查找文件"></a>find  查找文件</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">在当前目录下查找a.txt</div><div class="line">$ find ./ -name a.txt    </div><div class="line">./a.txt</div><div class="line">./mydir/a.txt</div><div class="line">在当前目录查找所有的txt文件</div><div class="line">$ find ./ -name *.txt    </div><div class="line">./a.txt</div><div class="line">./mydir/a.txt</div><div class="line">在根目录下查找ls命令</div><div class="line">$ sudo find / -name ls   </div><div class="line">find: ‘/run/user/1000/gvfs’: Permission denied</div><div class="line">/usr/bin/ls</div><div class="line">$</div></pre></td></tr></table></figure>
</li>
<li><h6 id="tar-压缩和解压"><a href="#tar-压缩和解压" class="headerlink" title="tar   压缩和解压"></a>tar   压缩和解压</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ tar -zcvf abc.tar.gz *.txt</div><div class="line">a.txt</div><div class="line">b.txt</div><div class="line">c.txt</div><div class="line">$ mkdir mydir2</div><div class="line">$ cp abc.tar.gz mydir2</div><div class="line">$ cd mydir2</div><div class="line">$ ls</div><div class="line">abc.tar.gz</div><div class="line">$ tar zxvf abc.tar.gz</div><div class="line">a.txt</div><div class="line">b.txt</div><div class="line">c.txt</div><div class="line">$ ls</div><div class="line">abc.tar.gz  a.txt  b.txt  c.txt</div></pre></td></tr></table></figure>
</li>
</ul>
<p>你知道文章开始说的1500多个命令怎么来的吗？用如下命令就知道了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cd /bin</div><div class="line">$ ls -al | wc -l</div><div class="line">1539</div></pre></td></tr></table></figure></p>
<p>那么问题来了，如何了解一个陌生的命令？</p>
<ul>
<li><p>which 在默认路径中搜索命令，返回该命令的绝对路径。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ which ps</div><div class="line">/bin/ps</div></pre></td></tr></table></figure>
</li>
<li><p>whereis 在更大的范围搜索命令，返回该命令相关的绝对路径。　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ whereis ps</div><div class="line">ps: /usr/bin/ps /usr/share/man/man1/ps.1.gz /usr/share/man/man1p/ps.1p.gz</div></pre></td></tr></table></figure>
</li>
<li><p>whatis 用简短的一句话来介绍命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ whatis ps</div><div class="line">ps (1p)              - report process status</div><div class="line">ps (1)               - report a snapshot of the current processes.</div></pre></td></tr></table></figure>
</li>
<li><p>man 查询命令的完整使用手册。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$man ps</div></pre></td></tr></table></figure>
</li>
</ul>
<p>更多资料<br><a href="http://man.linuxde.net/" target="_blank" rel="external">Linux命令大全</a><br><a href="http://cn.linux.vbird.org/" target="_blank" rel="external">鸟哥Linux私菜</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/16/course/embeded/lesson_3/" data-id="cj0mizkz0000kj0uffsibivl5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/16/course/embeded/lesson_2/" class="article-date">
  <time datetime="2017-03-16T02:45:00.000Z" itemprop="datePublished">2017-03-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/16/course/embeded/lesson_2/">（2）虚拟机和Linux安装使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><h4 id="安装虚拟机和Linux（Fedora25）系统"><a href="#安装虚拟机和Linux（Fedora25）系统" class="headerlink" title="安装虚拟机和Linux（Fedora25）系统"></a>安装虚拟机和Linux（Fedora25）系统</h4><h4 id="掌握Fedora基本使用"><a href="#掌握Fedora基本使用" class="headerlink" title="掌握Fedora基本使用"></a>掌握Fedora基本使用</h4><h4 id="了解Linux目录结构意义"><a href="#了解Linux目录结构意义" class="headerlink" title="了解Linux目录结构意义"></a>了解Linux目录结构意义</h4><hr>
<h5 id="分二步进行，先装虚拟机，再装Linux操作系统。这里拿VMware和Fedora25（目前是最新版本）。"><a href="#分二步进行，先装虚拟机，再装Linux操作系统。这里拿VMware和Fedora25（目前是最新版本）。" class="headerlink" title="分二步进行，先装虚拟机，再装Linux操作系统。这里拿VMware和Fedora25（目前是最新版本）。"></a>分二步进行，先装虚拟机，再装Linux操作系统。这里拿VMware和Fedora25（目前是最新版本）。</h5><ul>
<li><p>安装VMware10，<a href="https://pan.baidu.com/s/1slbHmKd" target="_blank" rel="external">点击</a>下载安装。不建议使用VirtualBox，因为VBox和Linux安装好后，主机和虚拟机之间拖动文件，粘贴拷贝功能无法使用。需要另外下载程序镜像安装，且有时报各种错误。</p>
</li>
<li><p>安装Fedora-LXDE-25(32/64位，根据当前电脑配置)，<a href="https://pan.baidu.com/s/1slbHmKd" target="_blank" rel="external">点击</a>下载。相对来说，Fedora比Ubuntu要素点，没Ubuntu那么炫。正因为如此，如果笔记本配置弱一点，强烈建议安装Fedora。它小，快，稳定是你的不二选择。</p>
</li>
</ul>
<h5 id="新建一个虚拟机"><a href="#新建一个虚拟机" class="headerlink" title="新建一个虚拟机"></a>新建一个虚拟机</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316105745.png" alt="image"></p>
<h5 id="选择典型配置"><a href="#选择典型配置" class="headerlink" title="选择典型配置"></a>选择典型配置</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316171838.png" alt="image"></p>
<h5 id="选择镜像ios文件"><a href="#选择镜像ios文件" class="headerlink" title="选择镜像ios文件"></a>选择镜像ios文件</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316171946.png" alt="image"></p>
<h5 id="命名虚拟机名和存放位置"><a href="#命名虚拟机名和存放位置" class="headerlink" title="命名虚拟机名和存放位置"></a>命名虚拟机名和存放位置</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316172159.png" alt="image"></p>
<h5 id="指定虚拟机磁盘大小，推荐60G。它不会马上占用60G的硬盘空间。"><a href="#指定虚拟机磁盘大小，推荐60G。它不会马上占用60G的硬盘空间。" class="headerlink" title="指定虚拟机磁盘大小，推荐60G。它不会马上占用60G的硬盘空间。"></a>指定虚拟机磁盘大小，推荐60G。它不会马上占用60G的硬盘空间。</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316172300.png" alt="image"><br><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316172323.png" alt="image"></p>
<h5 id="开始安装，直接回车"><a href="#开始安装，直接回车" class="headerlink" title="开始安装，直接回车"></a>开始安装，直接回车</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316172608.png" alt="image"><br><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316172832.png" alt="image"><br><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316173030.png" alt="image"><br><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316173059.png" alt="image"></p>
<h5 id="指定root账号密码和创建一个管理员账号"><a href="#指定root账号密码和创建一个管理员账号" class="headerlink" title="指定root账号密码和创建一个管理员账号"></a>指定root账号密码和创建一个管理员账号</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316173149.png" alt="image"></p>
<h5 id="勾住“将此用户设为管理员”"><a href="#勾住“将此用户设为管理员”" class="headerlink" title="勾住“将此用户设为管理员”"></a>勾住“将此用户设为管理员”</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316173312.png" alt="image"></p>
<h5 id="自动安装，可以先休息一会了"><a href="#自动安装，可以先休息一会了" class="headerlink" title="自动安装，可以先休息一会了"></a>自动安装，可以先休息一会了</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316173837.png" alt="image"></p>
<h5 id="重启进入"><a href="#重启进入" class="headerlink" title="重启进入"></a>重启进入</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316173920.png" alt="image"></p>
<h5 id="登录系统"><a href="#登录系统" class="headerlink" title="登录系统"></a>登录系统</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316174104.png" alt="image"></p>
<h5 id="打开终端"><a href="#打开终端" class="headerlink" title="打开终端"></a>打开终端</h5><p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_2/20170316174308.png" alt="image"></p>
<p>下图是根目录文件结构。请记住，Linux下一切对象皆文件，包括软硬件设备，都是用文件来描述的。</p>
<p><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_3/20170317104329.png" alt="image"></p>
<table>
<thead>
<tr>
<th>目录</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/bin</td>
<td>bin是binary的简称，里面都是二进制的可执行程序，如ls,cd</td>
</tr>
<tr>
<td>/boot</td>
<td>启动Linux的配置文件和程序</td>
</tr>
<tr>
<td>/dev</td>
<td>设备文件</td>
</tr>
<tr>
<td>/etc</td>
<td>配置文件</td>
</tr>
<tr>
<td>/home</td>
<td>用户主目录</td>
</tr>
<tr>
<td>/lib</td>
<td>系统动态库</td>
</tr>
<tr>
<td>/lib64</td>
<td>64位系统的动态库</td>
</tr>
<tr>
<td>/host+found</td>
<td>存放系统非正常关机“无家可归”的文件</td>
</tr>
<tr>
<td>/media</td>
<td>即插即用型设备的挂载目录，如U盘</td>
</tr>
<tr>
<td>/mnt</td>
<td>用来临时挂载其他文件系统的目录</td>
</tr>
<tr>
<td>/opt</td>
<td>opt是optional的简称，可选的软件安装包目录</td>
</tr>
<tr>
<td>/proc</td>
<td>内存文件系统，查看和修改Linux系统运行时的内核数据结构和内核参数</td>
</tr>
<tr>
<td>/root</td>
<td>Linux超级权限用户的主目录</td>
</tr>
<tr>
<td>/run</td>
<td>系统运行时需要的，不能随便删除，系统运行时重新生成。如进程id，文件锁等</td>
</tr>
<tr>
<td>/sbin</td>
<td>root权限才能执行的命令目录</td>
</tr>
<tr>
<td>/srv</td>
<td>存放服务器需要访问的数据，如web网页，ftp资源</td>
</tr>
<tr>
<td>/sys</td>
<td>可以说是改进后的/opt，还有管理Linux统一设备模型</td>
</tr>
<tr>
<td>/tmp</td>
<td>存放程序运行产生，可以随时清理的缓存或临时文件</td>
</tr>
<tr>
<td>/usr</td>
<td>存放用户安装的第三方程序</td>
</tr>
<tr>
<td>/var</td>
<td>存放系统程序生成的不可自动销毁的缓存文件、日志记录。如email，数据库等</td>
</tr>
</tbody>
</table>
<p>下图是在根目录下通过ls -al命令输出的结果：<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/course/embeded/lesson_3/20170317104653.png" alt="image"></p>
<table>
<thead>
<tr>
<th>文件类型与权限</th>
<th>链接占用的节点(i-node)</th>
<th>文件拥有者</th>
<th>文件拥有者的用户组</th>
<th>文件大小</th>
<th>修改时间</th>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>lrwxrwxrwx.</td>
<td>1</td>
<td>root</td>
<td>root</td>
<td>7</td>
<td>2月 17 10:35</td>
<td>bin -&gt; usr/bin</td>
</tr>
<tr>
<td>dr-xr-xr-x.</td>
<td>6</td>
<td>root</td>
<td>root</td>
<td>4096</td>
<td>3月 17 01:36</td>
<td>boot</td>
</tr>
</tbody>
</table>
<ol>
<li>d，l代表文件类型，3组rwx分别代表文件拥有者，所在组，其他用户的权限。</li>
<li>r（read）代表读权限，w（write）代表写权限，x（execute）代表执行权限。</li>
<li>常见的文件类型有：<ul>
<li>-： 普通文件</li>
<li>d： 目录</li>
<li>b： 块文件</li>
<li>c： 字符文件</li>
<li>l： 符号链接文件</li>
<li>p： 命名管道文件FIFO</li>
<li>s： 套接字文件</li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/16/course/embeded/lesson_2/" data-id="cj0mizkz7000sj0ufh9ueb5lu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-course/embeded/lesson_1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/16/course/embeded/lesson_1/" class="article-date">
  <time datetime="2017-03-16T01:45:00.000Z" itemprop="datePublished">2017-03-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/16/course/embeded/lesson_1/">（1）课程介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>目前移动互联网+、智能硬件/VR、人工智能技术等技术相互激动，人类的生活方式将激动人心，充满各种惊奇和变数。有人说，想象力将是未来最核心的个人竞争力。诚然，缺少想象力，个人和社会将拘囿不前。但脱离最基本物质认知，技术原理理解和实践运用，恐怕就是空想+妄想。</p>
<p>基于此，结合目前高校专业开设状况，和本人多年工作经验。打算制作一套学习嵌入式开发的课程，分二部分，共18个章节。本套课程的特点有：</p>
<ol>
<li>内容全面：涵盖嵌入式开发的基础知识和关键技术，贯穿Linux内核配置编译到上层QT应用程序开发，对标企业主流技术需求。</li>
<li>图文并茂；枯燥讲解转换成有条理的图片，易于读者理解和参与学习。</li>
<li>学以致用；通过实验动手探索，团队项目开发，培养提出问题，分析解决问题意识和能力，逐步提升专业技能，强化团队合作精神。</li>
</ol>
<p>本课程主要面向电信，通行类专本科大二，三学生，以及对嵌入式，Linux，QT应用开发感兴趣的朋友们。</p>
<p>章节目录：</p>
<h4 id="第一部分："><a href="#第一部分：" class="headerlink" title="第一部分："></a>第一部分：</h4><ol>
<li>虚拟机和Linux安装使用</li>
<li>Linux常用命令</li>
<li>Linux脚本编写</li>
<li>gcc和gdb</li>
<li>makefile结构</li>
<li>模块和字符设备驱动</li>
<li>交叉工具链</li>
<li>Linux内核结构和编译</li>
<li>uboot结构和编译</li>
<li>制作busybox程序</li>
<li>制作yaffs2文件系统</li>
</ol>
<h4 id="第二部分："><a href="#第二部分：" class="headerlink" title="第二部分："></a>第二部分：</h4><ol>
<li>QT和qtcreator介绍</li>
<li>Widgets程序开发</li>
<li>Quick应用程序开发</li>
<li>QT移植到OK6410</li>
<li>V4L2和视频预览</li>
<li>项目一：视频直播</li>
<li>项目二：行车记录仪</li>
</ol>
<h4 id="所有章节我会持续更新，由于本人水平有限，如有错漏，请大家指正。"><a href="#所有章节我会持续更新，由于本人水平有限，如有错漏，请大家指正。" class="headerlink" title="所有章节我会持续更新，由于本人水平有限，如有错漏，请大家指正。"></a>所有章节我会持续更新，由于本人水平有限，如有错漏，请大家指正。</h4><hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/16/course/embeded/lesson_1/" data-id="cj0mizkz3000nj0uf3han6d0u" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-school/cdut/2017/shixun_0227_0310" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/14/school/cdut/2017/shixun_0227_0310/" class="article-date">
  <time datetime="2017-03-14T08:34:00.000Z" itemprop="datePublished">2017-03-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/14/school/cdut/2017/shixun_0227_0310/">成都理工计科学院14级嵌入式实训</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>先来个全家福，对着镜头刚开始都有点害羞<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170309_113342.jpg" alt="image"><br>在陈老的招唤，花儿与绿叶齐齐放开了<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/heying.jpg" alt="image"><br>习主席的祝语，2017撸起袖子加油干<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170309_104357.jpg" alt="image"><br>两边的小伙子，心有灵犀一点笑<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170309_104830.jpg" alt="image"><br>组长貌似犯难了<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170309_104846.jpg" alt="image"><br>小目标有难，熊老亲自开组长大会，各种问题冤情统统上报，总结方法，分工合作，打气加油，向着今晚10点的deadline出发<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/meeting.JPG" alt="image"><br>小伙伴们满血复活<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170310_104544.jpg" alt="image"><br>答辩开始<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170310_134104.jpg" alt="image"><br>曾老点评<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170310_113250.jpg" alt="image"><br>成果展示<br><img src="http://omn7bkwg7.bkt.clouddn.com/images/school/cdut/2017/0227_0310/IMG_20170310_133039.jpg" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/14/school/cdut/2017/shixun_0227_0310/" data-id="cj0mizkzt001hj0uf7y4kvxum" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/大学生实训/">大学生实训</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo-git/">hexo git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大学生实训/">大学生实训</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵌入式开发/">嵌入式开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/校园采风/">校园采风</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/hexo-git/" style="font-size: 10px;">hexo git</a> <a href="/tags/大学生实训/" style="font-size: 10px;">大学生实训</a> <a href="/tags/嵌入式开发/" style="font-size: 20px;">嵌入式开发</a> <a href="/tags/校园采风/" style="font-size: 10px;">校园采风</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/22/course/embeded/lesson_9/">（9）gdb</a>
          </li>
        
          <li>
            <a href="/2017/03/21/course/embeded/lesson_8/">（8）gcc</a>
          </li>
        
          <li>
            <a href="/2017/03/20/course/embeded/lesson_7/">（7）Linux Shell</a>
          </li>
        
          <li>
            <a href="/2017/03/20/course/embeded/lesson_6/">（6）Linux常用命令-进程和网络管理</a>
          </li>
        
          <li>
            <a href="/2017/03/19/course/embeded/lesson_5/">（5）Linux常用命令-软件管理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 HighSung<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>